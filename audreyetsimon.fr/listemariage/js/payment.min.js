function processPayment(e){document.getElementById("loader").style.display="block";var t=new XMLHttpRequest,n={token:e.id,email:e.email,amount:window.price,item:window.item};t.onreadystatechange=function(){if(4===t.readyState)if(201===t.status){document.getElementById("loader").style.display="none";var e=JSON.parse(t.response).id;console.log(e),$("#stdMsgId").val(e),$(".modal-stdItem").show()}else alert("Désolé, il y a eu un problème dans le traitement de votre paiement. Aucune somme n'a été débitée. Nous vons invitons à réessayer ou bien à nous contacter directement : audreyetsimon.p@gmail.com"),document.getElementById("loader").style.display="none"},t.open("POST","https://x97t9hqk1e.execute-api.eu-west-3.amazonaws.com/prod/payment",!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(n))}var handler=StripeCheckout.configure({key:"pk_live_a1RE9seMvw4wYUEs9SiGLl5h",image:"img/profile.png",locale:"fr",token:function(e){processPayment(e)}}),els=document.getElementsByClassName("paybutton");Array.prototype.forEach.call(els,function(e){e.addEventListener("click",function(e){window.price=100*$(this).attr("relprice"),window.item=$(this).attr("reldesc"),void 0!==window.item&&!1!==window.item&&""!==window.item&&0!==window.item||(window.price=100*$("#customAmount").val(),window.item=$("#customIdea").val()),0==window.price||""==window.item?$(".errorMsg").html("Certains champs sont vides"):($(".cmodal-container").hide(),handler.open({name:"Liste de mariage A&S",description:window.item,currency:"eur",amount:window.price,allowRememberMe:!1})),e.preventDefault()})}),window.addEventListener("popstate",function(){handler.close()});