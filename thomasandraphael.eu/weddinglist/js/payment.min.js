function processPayment(e){document.getElementById("loader").style.display="block";var t=new XMLHttpRequest,n={token:e.id,email:e.email,amount:window.price,item:window.item};t.onreadystatechange=function(){if(4===t.readyState)if(201===t.status){document.getElementById("loader").style.display="none";var e=JSON.parse(t.response).id;console.log(e),$("#stdMsgId").val(e),$(".modal-thanks").show()}else alert("Sorry, there has been a problem with your payment. No amount has been debited. We invite you to make a direct transfer to our account (IBAN : BE37 7350 5282 0528) or to contact us directly: tomxster@gmail.com"),document.getElementById("loader").style.display="none"},t.open("POST","https://x97t9hqk1e.execute-api.eu-west-3.amazonaws.com/prod/payment",!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(n))}var handler=StripeCheckout.configure({key:"pk_live_a1RE9seMvw4wYUEs9SiGLl5h",image:"img/portfolio/resized/gift.jpg",locale:"fr",token:function(e){processPayment(e)}}),els=document.getElementsByClassName("paybutton");Array.prototype.forEach.call(els,function(e){e.addEventListener("click",function(e){window.price=100*$("#customAmount").val(),item+=" : "+$("#customIdea").val(),0==window.price||""==window.item?$(".errorMsg").html("Certains champs sont vides"):($(".cmodal-container").hide(),handler.open({name:"Wedding list T&R",description:window.item,currency:"eur",amount:window.price,allowRememberMe:!1})),e.preventDefault()})}),window.addEventListener("popstate",function(){handler.close()});