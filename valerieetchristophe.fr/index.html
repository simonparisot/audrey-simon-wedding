<!DOCTYPE html>
<html lang="fr">

<head>

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, height=device-height,  initial-scale=1.0, user-scalable=no, user-scalable=0"/>

	<title>Valérie et Christophe</title>
	<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
	<link rel="stylesheet" type="text/css" href="style.css?v2.0.3">
	<link rel="stylesheet" type="text/css" href="style-mobile.css?v2.0.3">

    <script src="https://js.stripe.com/v3/"></script>
    <script type="text/javascript">

        //var stripe = Stripe('pk_live_a1RE9seMvw4wYUEs9SiGLl5h');
        function displayPayment(button) {
            
            // create a Stripe Checkout session when clicking on "Offrir" button
            var price_id = button.parentElement.parentElement.querySelector('.prix').getAttribute("rel");
            if (price_id == "") {
                var customprice = button.parentElement.parentElement.querySelector('#custom_price').value*100;
                var customtext = button.parentElement.parentElement.querySelector('#custom_text').value;
                var body = { custom_price: customprice, custom_text: customtext };
            }else{
                var body = { priceid: price_id };
            }

            fetch('https://mkyxg4hpmk.execute-api.eu-west-1.amazonaws.com/create-checkout-session', { 
                method: "POST",
                body: JSON.stringify(body)
            })
            .then(function(response) { return response.json(); })
            .then(function(session) { return stripe.redirectToCheckout({ sessionId: session.id }); })
            .then(function(result) {
                // if `redirectToCheckout` fails due to a browser or network error
                if (result.error) alert(result.error.message)
            })
            .catch(function(error) { console.error('Error:', error); });
        }
    </script>

    <script type="text/javascript">
    	var rsvp = {};
    	function rsvpNext(nextQuestion, data, value) {
    		if (value=="") alert("Pas si vite, il me manque une info !");
    		else {
    			if (data) rsvp[data]=value;
    			if (nextQuestion=='.ok') {
    				console.log(rsvp);
    				// TO DO 
    				// send data server side
    				// if (something went wong) nextQuestion='.error';  
    			}
				document.querySelector('.currentQuestion').classList.remove("currentQuestion");
				document.querySelector(nextQuestion).classList.add("currentQuestion");
    		}
    	}
    </script>

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129355826-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-129355826-1');
	</script>

</head>
<body>

<section>
	
	<div class="savethedate">
		<img id="title" src="img/title.png">
		<img id="subtitle" src="img/subtitle.png">
	</div>

</section>


<section>

	<h1 class="title">Serez-vous des nôtres ?</h1>

	<div class="rsvp q1 currentQuestion">
		<div class="btnLg btnFixed" onClick="rsvpNext('.q2');">Oui bien sûr !</div>
		<div class="btnLg btnFixed btnGreyed" onClick="rsvpNext('.ko');">Non malheureusement</div>
	</div>

	<div class="rsvp q2">
		<p>Parfait ! Quel est votre nom ?</p>
		<input class="inputLg btnFixed" type="text" id="guestName" required placeholder="Jean Valjean">
		<div class="btnLg btnFixed" onClick="rsvpNext('.q3','name', document.querySelector('#guestName').value);">Continuer</div>
		<div class="btnLg btnFixed btnGreyed" onClick="rsvpNext('.q1');">Retour</div>
	</div>

	<div class="rsvp ko">
		<p>Oh :(</p>
		<div class="btnLg btnFixed btnGreyed" onClick="rsvpNext('.q1');">Retour</div>
	</div>

	<div class="rsvp q3">
		<p>Combien serez-vous ?</p>
		<input class="inputLg btnFixed" type="number" id="guestNb" required maxlength="1">
		<div class="btnLg btnFixed" onClick="rsvpNext('.q4','nb', document.querySelector('#guestNb').value);">Continuer</div>
		<div class="btnLg btnFixed btnGreyed" onClick="rsvpNext('.q2');">Retour</div>
	</div>

	<div class="rsvp q4">
		<p>Et pour finir, quelle est votre adresse postale ?</p>
		<input class="inputLg btnFixed" type="text" id="guestAddress" required placeholder="1 rue Grand rue, Cherbourg">
		<div class="btnLg btnFixed" onClick="rsvpNext('.ok','address', document.querySelector('#guestAddress').value);">Envoyer</div>
		<div class="btnLg btnFixed btnGreyed" onClick="rsvpNext('.q3');">Retour</div>
	</div>

	<div class="rsvp ok">
		<p>C'est enregistré, merci beaucoup !</p>
	</div>

	<div class="rsvp error">
		<p>Aie, une erreur... je n'ai pas pu enregistrer les informations. Pourriez-vous me le signaler par email ?</p>
	</div>

	
</section>

<section>

	<h1 class="title">Quel est le programme ?</h1>
	
	<div class="info left">
		<img src="img/mairie.png" class="nomobile">
		<h2 class="subtitle">Mairie</h2>
		<p>Nous nous marierons le vendredi 25 juin 2021 à 10h30 à la mairie du 15ème arrondissement,<br>31 rue Peclet, Paris 15ème</p>
	</div>
	
	<div class="info right">
		<img src="img/ceremonie.png" class="nomobile">
		<h2 class="subtitle">Cérémonie religieuse</h2>
		<p>La cérémonie religieuse se déroulera à 14h30 <br>à l'église Saint-François-Xavier, <br>12 Place du Président Mithouard, Paris 7ème</p>
	</div>
	
	<div class="info left">
		<img src="img/champagne2.png" class="nomobile">
		<h2 class="subtitle">Vin d'honneur</h2>
		<p>Dès 16h00, ambiance plus détendue autour d'une flûte de champagne et d'une pièce-montée au 6 rue de Belgrade,<br>Paris 7ème</p>
	</div>

    <img class="plan box" src="img/plan.jpg">
    <p>Les différents lieux de la journée sont proches les uns des autres, il est tout à fait possible de ne se déplacer qu’à pied.</p>
</section>

<section>
	
	<h1>Notre liste de mariage</h1>
	<p>Chers amis, après 3 ans de vie commune, nous n'avons plus vraiment besoin de vaisselle ! Notre plus grand plaisir serait de partir en Lune de Miel en Thaïlande en pensant à vous 😊</p>
    <p>Si vous souhaitez nous faire un cadeau, vous trouverez ci-dessous quelques éléments de notre voyage de noces que vous pouvez nous offrir.</p>
    <p>Un grand merci 😍</p>

    <div id="list-container">

        <div class="list-item"><div class="box">
            <div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
            <div class="prix" rel="price_1HOsmMESd2YLxnCl6blSSesV">10 €</div>
            <img src="img/list/creme.jpg" />
            <div class="list-text">
                <h1>Une bonne crème solaire pour Guillaume</h1>
                Sshhhh il vient du Nord... 🤫
            </div>
        </div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
    		<div class="prix" rel="price_1HOsmpESd2YLxnClHAXVHMC0">20 €</div>
    		<img src="img/list/cocktails.jpg" />
    		<div class="list-text">
    			<h1>Deux cocktails à partager au bord de la piscine</h1>
    			En pensant à vous
    		</div>
    	</div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
    		<div class="prix" rel="price_1HOsnKESd2YLxnClngFn9eoG">30 €</div>
    		<img src="img/list/biafine.jpg" />
    		<div class="list-text">
    			<h1>Deux tubes de Biafine</h1>
    			Pour quand Guillaume oubliera de mettre de la crème solaire
    		</div>
    	</div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
    		<div class="prix" rel="price_1HOso4ESd2YLxnCl9kwiEtLV">40 €</div>
    		<img src="img/list/guide.jpg" />
    		<div class="list-text">
    			<h1>Le guide des meilleurs trails de Thaïlande</h1>
    			Quand va-t-il s'arrêter...?  🙄
    		</div>
    	</div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
    		<div class="prix" rel="price_1HOsoXESd2YLxnClbRkEULbK">50 €</div>
    		<img src="img/list/maillot.jpg" />
    		<div class="list-text">
    			<h1>Un nouveau maillot de bain pour Diane</h1>
    			c'est à dire le 42ème
    		</div>
    	</div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
    		<div class="prix" rel="price_1HOsp0ESd2YLxnCl43Fl3A8c">80 €</div>
    		<img src="img/list/plongee.jpg" />
    		<div class="list-text">
    			<h1>Une sortie de plongée</h1>
    			Dans un des plus beau spot du monde
    		</div>
    	</div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
    		<div class="prix" rel="price_1HOspdESd2YLxnClIxZF59au">100 €</div>
    		<img src="img/list/dinerromantique.jpg" />
    		<div class="list-text">
    			<h1>Un dîner romantique seuls sur la plage</h1>
    			Avec les bougies dans le sable et tout le tralala
    		</div>
    	</div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
    		<div class="prix" rel="price_1HOspwESd2YLxnCl679BSML7">120 €</div>
    		<img src="img/list/avion.jpg" />
    		<div class="list-text">
    			<h1>1000 km en avion pour partir au bout du monde</h1>
    			Et peut être revenir
    		</div>
    	</div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
    		<div class="prix" rel="price_1HOsqLESd2YLxnClGreY2fov">150 €</div>
    		<img src="img/list/hotel.jpg" />
    		<div class="list-text">
    			<h1>Une nuit dans un hôtel de rêve</h1>
    			Avec piscine privée 😍
    		</div>
    	</div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
    		<div class="prix" rel="price_1HOsqgESd2YLxnClgsfnR575">200 € </div>
    		<img src="img/list/ile.jpg" />
    		<div class="list-text">
    			<h1>Deux jours sur une île déserte</h1>
    			Pas trop déserte quand même sinon Diane aura faim
    		</div>
    	</div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir"><span class="btnLg" onClick="displayPayment(this);">Offrir</span></div>
    		<div class="prix" rel="price_1HOsr7ESd2YLxnClIQdiscQm">350 €</div>
    		<img src="img/list/angkor.jpg" />
    		<div class="list-text">
    			<h1>Un détour par le Cambodge</h1>
    			Pour voir les temples d'Angkor
    		</div>
    	</div></div>

    	<div class="list-item"><div class="box">
    		<div class="offrir custom">
                <input id="custom_price" type="number" placeholder="montant (en €)" />
                <input id="custom_text" type="text" placeholder="Un petit message ?" />
                <div class="btnLg" onClick="displayPayment(this);">Offrir</div>
            </div>
    		<div class="prix" rel="">Montant libre</div>
    		<img src="img/list/surprise.jpg" />
    		<div class="list-text">
    			<h1>Quelque chose de particulier que vous aimeriez nous offrir ?</h1>
    		</div>
    	</div></div>

    </div>

</section>


<footer>
	Fait avec ♥ par <a href="mailto:parisot.simon@gmail.com">Simon</a> pour Valérie et Christophe<br>
</footer>

</body>

</html>
